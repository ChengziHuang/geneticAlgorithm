# A genetic algorihtm to solve the Travelling Salesman Problem

## idea

The initial solutions used by genetic algorithm  are found by 2-opt.

The crossover operator uses the edges to cross:

&emsp; **Step 1:** A pair of parents is denoted as P<sub>A</sub> and P<sub>B</sub>, and G<sub>AB</sub> is defined as a graph constructed by merging P<sub>A</sub> and P<sub>B</sub>.

&emsp; **Step 2:** Divide edges on G<sub>AB</sub> into AB-cycles, where an AB-cycle is defined as a closed loop on G<sub>AB</sub> that can be generated by alternately tracing edges of P<sub>A</sub> and P<sub>B</sub>.

&emsp; **Step 3:** Construct an E-set by selecting AB-cycles.

&emsp; **Step 4:** Generate an intermediate solution by applying E-set to P<sub>A</sub>, i.e., by removing P<sub>A</sub>’s edges in the E-set from P<sub>A</sub> and adding P<sub>B</sub>’s edges in the E-set to it.

&emsp; **Step 5:** Modify the intermediate solution to create a valid tour by connecting its sub-tours. Two sub-tours are connected by respectively deleting one edge from each sub-tour and adding two edges to connect them.

![Illustration of the Crossover operator](https://github.com/ChengziHuang/geneticAlgorithm/blob/master/figure/combinate.png)

## main framework

1. {x<sub>1</sub>,..., x<sub>pop</sub>} := 2-opt()
2. **repeat**
3. &emsp; r(.) := a random permutation of 1,..., x<sub>pop</sub>
4. &emsp; **for** i := 1 to   x<sub>pop</sub>  **do**
5. &emsp; &emsp; p<sub>A</sub> := x<sub>r(i)</sub>, p<sub>B</sub> := x<sub>r(i+1)</sub>
6. &emsp; &emsp; {c<sub>1</sub>,...,c<sub>N<sub>ch</sub></sub>} := Crossover(p<sub>A</sub>, p<sub>B</sub>)
7. &emsp; &emsp; x<sub>r(i)</sub> := Select(c<sub>1</sub>,...,c<sub>N<sub>ch</sub></sub>, p<sub>A</sub>)
8. &emsp; **end for**
9. **until** a termination condition is satisfied
10. **return** the best individual in the population

## Usage

```shell
make
./TSP a280.tsp
```

## output

```
Instance : a280.tsp
opt distance : 2579
trial : 10
generation : 100
population : 200
children : 100
trial...1
gene	min	max	ave
1	2689	2948	2809.66
2	2630	2824	2729.45
3	2611	2762	2672.82
4	2593	2710	2631.82
5	2583	2652	2605.39
6	2579	2617	2590.59
7	2579	2599	2582.43
8	2579	2585	2579.39
9	2579	2581	2579.03
10	2579	2579	2579
trial...2
gene	min	max	ave
1	2682	2914	2807.22
2	2611	2825	2726.43
3	2589	2768	2665.95
4	2584	2695	2624.8
5	2579	2647	2600.36
6	2579	2614	2586.2
7	2579	2589	2580.29
8	2579	2581	2579.1
9	2579	2579	2579
trial...3
gene	min	max	ave
1	2672	2962	2809.64
2	2628	2837	2729.62
3	2611	2756	2670.72
4	2590	2694	2629.88
5	2579	2650	2604.36
6	2579	2616	2588.8
7	2579	2596	2581.42
8	2579	2590	2579.39
9	2579	2581	2579.02
10	2579	2579	2579
trial...4
gene	min	max	ave
1	2683	2951	2807.09
2	2646	2825	2723.92
3	2607	2772	2664.22
4	2591	2690	2624.85
5	2579	2632	2600.01
6	2579	2606	2587.26
7	2579	2595	2580.99
8	2579	2584	2579.26
9	2579	2579	2579
trial...5
gene	min	max	ave
1	2644	2945	2804.91
2	2613	2839	2725.09
3	2602	2784	2664.07
4	2588	2686	2623.53
5	2581	2638	2599.74
6	2579	2616	2587.3
7	2579	2593	2581.03
8	2579	2584	2579.28
9	2579	2581	2579.01
10	2579	2579	2579
trial...6
gene	min	max	ave
1	2703	2928	2806.62
2	2631	2805	2726.84
3	2611	2751	2668.76
4	2591	2696	2627.41
5	2580	2633	2601.24
6	2579	2612	2587.07
7	2579	2590	2580.64
8	2579	2581	2579.17
9	2579	2579	2579
trial...7
gene	min	max	ave
1	2685	2912	2809.76
2	2639	2819	2730.79
3	2608	2753	2671.58
4	2591	2693	2630.68
5	2581	2651	2604.8
6	2579	2611	2589.99
7	2579	2594	2582.45
8	2579	2585	2579.65
9	2579	2583	2579.04
10	2579	2579	2579
trial...8
gene	min	max	ave
1	2682	2922	2804.56
2	2633	2805	2724.71
3	2605	2751	2664.66
4	2591	2680	2623.64
5	2583	2644	2600.57
6	2579	2606	2587.43
7	2579	2591	2581.05
8	2579	2583	2579.28
9	2579	2581	2579.01
10	2579	2579	2579
trial...9
gene	min	max	ave
1	2667	2933	2807.38
2	2612	2843	2727.38
3	2599	2757	2667.3
4	2588	2687	2625.24
5	2581	2641	2601.44
6	2579	2609	2588.22
7	2579	2596	2581.68
8	2579	2585	2579.29
9	2579	2581	2579.01
10	2579	2579	2579
trial...10
gene	min	max	ave
1	2692	2918	2804.24
2	2638	2835	2722.89
3	2611	2783	2663.57
4	2592	2682	2623.82
5	2581	2636	2601.27
6	2579	2618	2588.21
7	2579	2598	2581.52
8	2579	2585	2579.47
9	2579	2581	2579.05
10	2579	2579	2579
opt count : 10
opt average : 2579
convergence generation : 9.7
```

All parameters are configure in the parameter.h file.
# A genetic algorihtm to solve the Travelling Salesman Problem

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

## Usage

```shell
make
./TSP a280.tsp
```

All parameters are configure in the parameter.h file.

## idea

The initial solutions used by genetic algorithm  are found by $2-opt$ local search.

The crossover operator uses the edges to cross:

&emsp; **Step 1:** A pair of parents is denoted as $P_A$ and $P_B$, and $G_{AB}$ is defined as a graph constructed by merging $P_A$ and $P_B$.

&emsp; **Step 2:** Divide edges on $G_{AB}$ into $AB-cycles$, where an $AB-cycle$ is defined as a closed loop on $G_{AB}$ that can be generated by alternately tracing edges of $P_A$ and $P_B$.

&emsp; **Step 3:** Construct an $E-set$ by selecting $AB-cycles$.

&emsp; **Step 4:** Generate an intermediate solution by applying $E-set$ to $P_A$, i.e., by removing $P_A$’s edges in the $E-set$ from $P_A$ and adding $P_B$’s edges in the $E-set$ to it.

&emsp; **Step 5:** Modify the intermediate solution to create a valid tour by connecting its sub-tours. Two sub-tours are connected by respectively deleting one edge from each sub-tour and adding two edges to connect them.

&emsp; &emsp; **(5-1)** Let $U_{i} \quad(i=1, \dots, k)$ be the set of edges included in the i-th sub-tour, where $k$ is the number of sub-tours in an intermediate solution.

&emsp; &emsp; **(5-2)** Choose the smallest sub-tour $U_{r}$ from $U_{i}$.

&emsp; &emsp; **(5-3)** Find a pair of edges, $e \in U_{r}$ and $e^{\prime} \in U_{j}(j \neq r)$ , so that it minimizes $\left\{-w(e)-w\left(e^{\prime}\right)+w\left(e^{\prime \prime}\right)+w\left(e^{\prime \prime \prime}\right)\right\}$ where $e^{\prime \prime}$ and $e^{\prime \prime \prime}$ are determined to connect two sub-tours. Let $U_{s}$ be a sub-tour including edge $e^{\prime}$. $U_{r}$ and $U_{s}$ are merged by $U_{r} :=\left(U_{r} \cup U_{s}-\left\{e, e^{\prime}\right\}\right) \cup\left\{e^{\prime \prime}, e^{\prime \prime \prime}\right\}$ , and empty $U_{s}$. $U_{s} :=U_{k}$ and subtract 1 from $k$.

&emsp; &emsp; **(5-4)** If $k$ is equal to $1, U_{1}$ is a valid tour, then terminate, else go to (5-2).

## main framework

1. $\left\{x_{1}, \ldots, x_{N_{\mathrm{pop}}}\right\} := 2-opt()$

2. **repeat**

3. &emsp; $r(\cdot) :=$ a random permutation of $1, \ldots, N_{\mathrm{pop}}$

4. &emsp; **for** $i :=1$ to $N_{\text { pop }}$ **do**

5. &emsp; &emsp; $P_{A} :=x_{r(i)}, P_{B} :=x_{r(i+1)}$

6. &emsp; &emsp; $\left\{c_{1}, \dots, c_{N_{\mathrm{ch}}}\right\} :=$ Crossover($P_A$, $P_B$)

7. &emsp; &emsp; $x_{r(i)} :=$ Select($c_{1}, \dots, c_{N_{\mathrm{ch}}}, P_{A}$)

8. &emsp; **end for**

9. **until** a termination condition is satisfied

10. **return** the best individual in the population